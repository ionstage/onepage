!function t(e,n,i){function o(s,a){if(!n[s]){if(!e[s]){var h="function"==typeof require&&require;if(!a&&h)return h(s,!0);if(r)return r(s,!0);var p=new Error("Cannot find module '"+s+"'");throw p.code="MODULE_NOT_FOUND",p}var c=n[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return o(n?n:t)},c,c.exports,t,e,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,e,n){!function(n){"use strict";var i=n.helper||t("../helper.js"),o=n.dom||t("../dom.js"),r=n.Component||t("./component.js"),s=i.inherits(function(t){s.super_.call(this),this.x=this.prop(0),this.y=this.prop(0),this.width=this.prop(0),this.height=this.prop(0),this.visible=this.prop(!1),this.stepForwardDisabled=this.prop(!1),this.stepBackwardDisabled=this.prop(!1),this.element=this.prop(t.element),this.mover=t.mover,this.deleter=t.deleter,this.forwardStepper=t.forwardStepper,this.backwardStepper=t.backwardStepper,this.resizer=t.resizer,this.onmove=s.prototype.onmove.bind(this),this.ondelete=s.prototype.ondelete.bind(this),this.onstepforward=s.prototype.onstepforward.bind(this),this.onstepbackward=s.prototype.onstepbackward.bind(this),this.onresizestart=s.prototype.onresizestart.bind(this),this.onresizemove=s.prototype.onresizemove.bind(this),this.onresizeend=s.prototype.onresizeend.bind(this),o.on(this.element(),o.eventType("start"),function(t){var e=o.target(t);o.parent(e)===this.element()&&(o.stop(t),o.supportsTouch()||o.cancel(t))}.bind(this)),o.supportsTouch()&&o.on(this.element(),"touchmove",o.cancel),o.on(this.deleteButtonElement(),"click",this.ondelete),o.on(this.stepForwardButtonElement(),"click",this.onstepforward),o.on(this.stepBackwardButtonElement(),"click",this.onstepbackward),o.draggable(this.resizeHandleElement(),this.onresizestart,this.onresizemove,this.onresizeend)},r);s.prototype.deleteButtonElement=function(){return o.child(this.element(),0)},s.prototype.stepForwardButtonElement=function(){return o.child(this.element(),1)},s.prototype.stepBackwardButtonElement=function(){return o.child(this.element(),2)},s.prototype.resizeHandleElement=function(){return o.child(this.element(),3)},s.prototype.redraw=function(){var t="translate("+this.x()+"px, "+this.y()+"px)";o.css(this.element(),{height:this.height()+"px",transform:t,visibility:this.visible()?"visible":"hidden",webkitTransform:t,width:this.width()+"px"}),this.stepForwardDisabled()?o.addClass(this.stepForwardButtonElement(),"disabled"):o.removeClass(this.stepForwardButtonElement(),"disabled"),this.stepBackwardDisabled()?o.addClass(this.stepBackwardButtonElement(),"disabled"):o.removeClass(this.stepBackwardButtonElement(),"disabled")},s.prototype.fitIn=function(t){this.x(t.x()),this.y(t.y()),this.width(t.width()),this.height(t.height())},s.prototype.keyEnabled=function(t){t?(o.on(document,"keydown",this.onmove),o.on(document,"keydown",this.ondelete)):(o.off(document,"keydown",this.onmove),o.off(document,"keydown",this.ondelete))},s.prototype.onmove=function(t){var e=o.which(t),n=s.keyMap[e];if(n)switch(o.cancel(t),n){case"left":this.mover(-1,0);break;case"up":this.mover(0,-1);break;case"right":this.mover(1,0);break;case"down":this.mover(0,1)}},s.prototype.ondelete=function(t){var e=o.type(t),n=o.which(t),i=s.keyMap[n],r="click"===e,a="keydown"===e&&("backspace"===i||"delete"===i);a&&o.cancel(t),(r||a)&&this.deleter()},s.prototype.onstepforward=function(){this.forwardStepper()},s.prototype.onstepbackward=function(){this.backwardStepper()},s.prototype.onresizestart=function(){this.resizer(0,0,!0,!1)},s.prototype.onresizemove=function(t,e){this.resizer(t,e,!1,!1)},s.prototype.onresizeend=function(t,e){this.resizer(t,e,!1,!0)},s.keyMap={8:"backspace",37:"left",38:"up",39:"right",40:"down",46:"delete"},"undefined"!=typeof e&&e.exports?e.exports=s:n.CanvasElementHandle=s}(this.app||(this.app={}))},{"../dom.js":7,"../helper.js":8,"./component.js":4}],2:[function(t,e,n){!function(n){"use strict";var i=n.helper||t("../helper.js"),o=n.dom||t("../dom.js"),r=n.Component||t("./component.js"),s=i.inherits(function(t){s.super_.call(this),this.srcText=this.prop(t.srcText),this.x=this.prop(t.x),this.y=this.prop(t.y),this.width=this.prop(t.width),this.height=this.prop(t.height),this.element=this.prop(t.element),this.parentElement=this.prop(t.parentElement),this.zIndex=this.prop("auto")},r);s.prototype.contains=function(t,e,n){var i=this.x(),o=this.y(),r=this.width(),s=this.height();return t>=i-n&&i+r+n>=t&&e>=o-n&&o+s+n>=e},s.prototype.redraw=function(){var t=this.element(),e=this.parentElement();if(!e&&t)return o.remove(t),void this.element(null);var n="translate("+this.x()+"px, "+this.y()+"px)";o.css(t,{transform:n,webkitTransform:n,zIndex:this.zIndex()})},s.load=function(t){return o.isURL(t.srcText)?h.load(t):a.load(t)};var a=i.inherits(function(t){a.super_.call(this,t),this.widthPerFontSize=this.prop(t.widthPerFontSize),this.heightPerFontSize=this.prop(t.heightPerFontSize),this.cache=this.prop({})},s);a.prototype.adjustSizeToKeepAspectRatio=function(){var t=this.cache(),e=this.widthPerFontSize(),n=this.heightPerFontSize(),i=Math.min(this.width()/e,this.height()/n);this.width(i*e),this.height(i*n),t.fontSize=i},a.prototype.redraw=function(){var t=this.cache();"fontSize"in t&&o.css(this.element(),{fontSize:t.fontSize+"px"}),a.super_.prototype.redraw.call(this),delete t.fontSize},a.load=function(t){var e=t.srcText,n=t.locator,r=t.sizer,s=t.parentElement;return Promise.resolve().then(function(){var t=o.el("<div>");e.split(/\r\n|\r|\n/g).forEach(function(e){e=i.escape(e).replace(/\s/g,"&nbsp;")||"&nbsp;";var n=o.el("<div>");o.html(n,e),o.append(t,n)}),o.addClass(t,"canvas-element");var h=20;o.css(t,{fontSize:h+"px"}),o.visible(t,!1),o.append(s,t);var p=o.rect(t),c=p.width,l=p.height,d=n({width:c,height:l}),u=new a({srcText:e,x:d.x,y:d.y,width:c,height:l,widthPerFontSize:c/h,heightPerFontSize:l/h,element:t,parentElement:s}),f=r({width:c,height:l});return(f.width!==c||f.height!==l)&&(u.width(f.width),u.height(f.height),u.adjustSizeToKeepAspectRatio()),u.redraw(),o.visible(t,!0),u})};var h=i.inherits(function(t){h.super_.call(this,t),this.aspectRatio=this.prop(t.aspectRatio)},s);h.prototype.adjustSizeToKeepAspectRatio=function(){var t=this.width(),e=this.height(),n=this.aspectRatio();t=Math.min(t,n*e),e=Math.min(e,t/n),this.width(t),this.height(e)},h.prototype.redraw=function(){o.css(this.element(),{width:this.width()+"px",height:this.height()+"px"}),h.super_.prototype.redraw.call(this)},h.load=function(t){var e=t.srcText,n=t.locator,i=t.sizer,r=t.parentElement;return new Promise(function(t,s){var a=o.el("<img>");o.addClass(a,"canvas-element"),o.src(a,e),o.visible(a,!1),o.on(a,"load",function(){var s=o.rect(a),p=s.width,c=s.height,l=p/c,d=o.rect(r),u=d.width,f=d.height;p>u&&(p=u,c=u/l),c>f&&(p=f*l,c=f);var m=n({width:p,height:c}),v=new h({srcText:e,x:m.x,y:m.y,width:p,height:c,aspectRatio:l,element:a,parentElement:r}),y=i({width:p,height:c});(y.width!==p||y.height!==c)&&(v.width(y.width),v.height(y.height),v.adjustSizeToKeepAspectRatio()),v.redraw(),o.visible(a,!0),t(v)}),o.on(a,"error",function(t){o.remove(a),s(t)}),o.append(r,a)})},"undefined"!=typeof e&&e.exports?e.exports=s:n.CanvasElement=s}(this.app||(this.app={}))},{"../dom.js":7,"../helper.js":8,"./component.js":4}],3:[function(t,e,n){!function(n){"use strict";var i=n.helper||t("../helper.js"),o=n.dom||t("../dom.js"),r=n.Component||t("./component.js"),s=n.Relation||t("./relation.js"),a=n.CanvasElement||t("./canvas-element.js"),h=n.CanvasElementHandle||t("./canvas-element-handle.js"),p=i.inherits(function(){p.super_.call(this)},i.List);p.prototype.fromPoint=function(t,e){for(var n=this.data,i=null,o=n.length-1;o>=0;o--){var r=n[o];if(r.contains(t,e,0))return r;!i&&r.contains(t,e,8)&&(i=r)}return i},p.prototype.swap=function(t,e){var n=this.data,i=n.length;if(!(0>t||t>=i||0>e||e>=i)){var o=n[t];n[t]=n[e],n[e]=o}},p.prototype.shiftRight=function(t){var e=this.data.indexOf(t);-1!==e&&this.swap(e,e+1)},p.prototype.shiftLeft=function(t){var e=this.data.indexOf(t);-1!==e&&this.swap(e,e-1)},p.prototype.canShiftRight=function(t){var e=this.data,n=e.indexOf(t);return-1!==n&&n!==e.length-1},p.prototype.canShiftLeft=function(t){var e=this.data.indexOf(t);return-1!==e&&0!==e};var c=i.inherits(function(t){this.canvas=this.prop(t.canvas),this.canvasElement=this.prop(t.canvasElement)},s);c.prototype.update=function(t){var e=this.canvasElement();if(t===e){var n=this.canvas(),i=n.width(),o=n.height(),r=e.x(),s=e.y(),a=e.width(),h=e.height(),p=20,c=Math.max(r,p-a),l=Math.max(s,p-h);c=Math.min(c,i-p),l=Math.min(l,o-p),e.x(c),e.y(l),n.hasCanvasElementHandle()&&n.selectedCanvasElement()===e&&n.canvasElementHandle().fitIn(e)}};var l=i.inherits(function(t){l.super_.call(this),this.canvasElementList=this.prop(new p),this.disabled=this.prop(!1),this.hasCanvasElementHandle=this.prop(t.hasCanvasElementHandle),this.element=this.prop(t.element),this.selectedCanvasElement=this.prop(null);var e;e=this.hasCanvasElementHandle()?new h({element:this.handleElement(),mover:l.prototype.canvasElementMover.bind(this),deleter:l.prototype.canvasElementDeleter.bind(this),forwardStepper:l.prototype.canvasElementForwardStepper.bind(this),backwardStepper:l.prototype.canvasElementBackwardStepper.bind(this),resizer:l.prototype.resizer.bind(this)}):null,this.canvasElementHandle=this.prop(e),this.dragContext=this.prop({});var n=l.prototype.onstart.bind(this),i=l.prototype.onmove.bind(this),r=l.prototype.onend.bind(this);o.draggable(this.element(),n,i,r),o.on(document,o.eventType("start"),function(){this.selectedCanvasElement(null),this.updateCanvasElementHandle()}.bind(this)),this.inserter=t.inserter;var s=l.prototype.ondrop.bind(this);o.droppable(this.element(),s),this.updater=t.updater,this.deleter=t.deleter},r);l.prototype.width=function(){return 640},l.prototype.height=function(){return 480},l.prototype.borderWidth=function(){return 5},l.prototype.containerElement=function(){return o.child(this.element(),0)},l.prototype.handleElement=function(){return o.child(this.element(),1)},l.prototype.redraw=function(){this.disabled()?o.addClass(this.element(),"disabled"):o.removeClass(this.element(),"disabled")},l.prototype.updateZIndex=function(){this.canvasElementList().toArray().forEach(function(t,e){t.zIndex(e)})},l.prototype.updateCanvasElementHandle=function(){if(this.hasCanvasElementHandle()){var t=this.selectedCanvasElement(),e=this.canvasElementHandle();if(t){var n=this.canvasElementList();e.stepForwardDisabled(!n.canShiftRight(t)),e.stepBackwardDisabled(!n.canShiftLeft(t)),e.fitIn(t),e.visible(!0),e.keyEnabled(!0)}else e.visible(!1),e.keyEnabled(!1)}},l.prototype.stopKeyEventOnCanvasElementHandle=function(){if(this.hasCanvasElementHandle()){var t=this.canvasElementHandle();t.visible()&&t.keyEnabled(!1)}},l.prototype.restartKeyEventOnCanvasElementHandle=function(){if(this.hasCanvasElementHandle()){var t=this.canvasElementHandle();t.visible()&&t.keyEnabled(!0)}},l.prototype.loadCanvasElement=function(t,e,n){return a.load({srcText:t,locator:e,sizer:n,parentElement:this.containerElement()}).then(function(t){this.canvasElementList().add(t);var e=new c({canvas:this,canvasElement:t});return t.relations().push(e),this.selectedCanvasElement(t),this.updateCanvasElementHandle(),this.updateZIndex(),t}.bind(this))},l.prototype.loadCanvasElementAll=function(t){return Promise.all(t.map(function(t){var e=t.srcText,n={x:t.x,y:t.y},i={width:t.width,height:t.height};return a.load({srcText:e,locator:function(){return n},sizer:function(){return i},parentElement:this.containerElement()})}.bind(this))).then(function(t){return t.forEach(function(t){this.canvasElementList().add(t);var e=new c({canvas:this,canvasElement:t});t.relations().push(e)}.bind(this)),this.updateZIndex(),t}.bind(this))},l.prototype.getCanvasElementPropsList=function(){return this.canvasElementList().toArray().map(function(t){return{srcText:t.srcText(),x:t.x(),y:t.y(),width:t.width(),height:t.height()}})},l.prototype.deleteCanvasElement=function(t){t&&(this.selectedCanvasElement()===t&&(this.selectedCanvasElement(null),this.updateCanvasElementHandle()),t.relations([]),t.parentElement(null),this.canvasElementList().remove(t),this.updateZIndex())},l.prototype.canvasElementMover=function(t,e){var n=this.selectedCanvasElement();n.x(n.x()+t),n.y(n.y()+e)},l.prototype.canvasElementDeleter=function(){this.deleteCanvasElement(this.selectedCanvasElement()),this.deleter()},l.prototype.canvasElementForwardStepper=function(){this.canvasElementList().shiftRight(this.selectedCanvasElement()),this.updateCanvasElementHandle(),this.updateZIndex(),this.updater()},l.prototype.canvasElementBackwardStepper=function(){this.canvasElementList().shiftLeft(this.selectedCanvasElement()),this.updateCanvasElementHandle(),this.updateZIndex(),this.updater()},l.prototype.resizer=function(){var t={};return function(e,n,i,o){var r;if(i)return r=this.selectedCanvasElement(),t.canvasElement=r,t.width=r.width(),t.height=r.height(),void this.stopKeyEventOnCanvasElementHandle();r=t.canvasElement;var s=r.width()/r.height(),a=Math.max(t.width+e,12*s,12),h=Math.max(t.height+n,12/s,12);r.width(a),r.height(h),r.adjustSizeToKeepAspectRatio(),o&&(this.restartKeyEventOnCanvasElementHandle(),(0!==e||0!==n)&&this.updater())}}(),l.prototype.onstart=function(t,e,n){var i=o.supportsTouch();i||o.cancel(n),o.removeFocus();var r=this.borderWidth();t-=r,e-=r;var s=this.dragContext(),a=this.canvasElementList().fromPoint(t,e);s.canvasElement=a,a&&(i&&o.cancel(n),o.stop(n),this.selectedCanvasElement(a),this.updateCanvasElementHandle(),this.stopKeyEventOnCanvasElementHandle(),s.x=a.x(),s.y=a.y())},l.prototype.onmove=function(t,e){var n=this.dragContext(),i=n.canvasElement;i&&(i.x(n.x+t),i.y(n.y+e))},l.prototype.onend=function(t,e){var n=this.dragContext().canvasElement;n&&(this.restartKeyEventOnCanvasElementHandle(),(0!==t||0!==e)&&this.updater())},l.prototype.ondrop=function(t,e,n){var i=this.borderWidth();t-=i,e-=i,this.inserter(o.getImageURLData(n)||o.getTextData(n),t,e)},"undefined"!=typeof e&&e.exports?e.exports=l:n.Canvas=l}(this.app||(this.app={}))},{"../dom.js":7,"../helper.js":8,"./canvas-element-handle.js":1,"./canvas-element.js":2,"./component.js":4,"./relation.js":5}],4:[function(t,e,n){!function(n){"use strict";var i=n.helper||t("../helper.js"),o=n.dom||t("../dom.js"),r=function(){this.relations=this.prop([])};r.prototype.prop=function(t,e,n){"function"!=typeof n&&(n=i.identity);var o=n(t,e);return function(t){return"undefined"==typeof t?o:void(t!==o&&(o=n(t,o),this.markDirty()))}},r.prototype.redraw=function(){},r.prototype.markDirty=function(){var t=[],e=null,n=function(e){for(var i=e,o=t.length;o>i;i++){var r=t[i];r.relations().forEach(function(t){t.update(r)})}t.length>o&&n(o)},i=function(){n(0),t.forEach(function(t){t.redraw()}),t=[],e=null};return function(){o.unsupported()||(-1===t.indexOf(this)&&t.push(this),null===e&&(e=o.animate(i)))}}(),"undefined"!=typeof e&&e.exports?e.exports=r:n.Component=r}(this.app||(this.app={}))},{"../dom.js":7,"../helper.js":8}],5:[function(t,e,n){!function(t){"use strict";var n=function(){};n.prototype.prop=function(t){var e=t;return function(t){return"undefined"==typeof t?e:void(e=t)}},n.prototype.update=function(){},"undefined"!=typeof e&&e.exports?e.exports=n:t.Relation=n}(this.app||(this.app={}))},{}],6:[function(t,e,n){!function(n){"use strict";var i=n.helper||t("../helper.js"),o=n.dom||t("../dom.js"),r=n.Component||t("./component.js"),s=i.inherits(function(){s.super_.call(this),this.fragment=this.prop(o.urlFragment())},r);s.prototype.redraw=function(){o.urlFragment(this.fragment())},"undefined"!=typeof e&&e.exports?e.exports=s:n.URLComponent=s}(this.app||(this.app={}))},{"../dom.js":7,"../helper.js":8,"./component.js":4}],7:[function(t,e,n){!function(t){"use strict";var n={};n.unsupported=function(){return"undefined"==typeof document},n.el=function(t){return"<"===t.charAt(0)?(t=t.match(/<(.+)>/)[1],document.createElement(t)):document.querySelector(t)},n.doc=function(){return document},n.body=function(){return document.body},n.title=function(t){document.title=t},n.append=function(t,e){t.appendChild(e)},n.remove=function(t){t.parentNode.removeChild(t)},n.child=function(t,e){var n=arguments.length;if(2===n)return t.children[e];for(var i=1;n>i;i++)e=arguments[i],t=t.children[e];return t},n.parent=function(t){return t.parentNode},n.css=function(t,e){var n=t.style;for(var i in e)n[i]=e[i]},n.addClass=function(t,e){t.classList.add(e)},n.removeClass=function(t,e){t.classList.remove(e)},n.html=function(t,e){t.innerHTML=e},n.value=function(t,e){return"undefined"==typeof e?t.value:void(t.value=e)},n.href=function(t,e){t.setAttribute("href",e)},n.src=function(t,e){t.src=e},n.disabled=function(t,e){t.disabled=e},n.visible=function(t,e){t.style.visibility=e?"visible":"hidden"},n.rect=function(t){return t.getBoundingClientRect()},n.scrollLeft=function(t){return t.scrollLeft},n.scrollTop=function(t){return t.scrollTop},n.resetScroll=function(t){t.scrollTop=0},n.removeFocus=function(){document.activeElement.blur()},n.selectAll=function(t){t.setSelectionRange(0,t.value.length)},n.clearSelection=function(){window.getSelection().removeAllRanges()},n.on=function(t,e,n){t.addEventListener(e,n)},n.off=function(t,e,n){t.removeEventListener(e,n)},n.animate=function(t){return window.requestAnimationFrame(t)},n.isURL=function(t){try{new URL(t)}catch(e){return!1}return!0},n.urlOrigin=function(){return location.protocol+"//"+location.host},n.urlPathName=function(){return location.pathname},n.urlFragment=function(t){return"undefined"==typeof t?location.hash.substring(1):void location.replace("#"+t)},n.supportsTouch=function(){return"createTouch"in document},n.target=function(t){return n.supportsTouch()&&"changedTouches"in t&&(t=t.changedTouches[0]),t.target},n.currentTarget=function(t){return t.currentTarget},n.type=function(t){return t.type},n.which=function(t){return t instanceof KeyboardEvent?t.which:null},n.pagePoint=function(t,e){return n.supportsTouch()&&(t=t.changedTouches[0]),{x:t.pageX-(e?e.x:0),y:t.pageY-(e?e.y:0)}},n.clientPoint=function(t,e){return n.supportsTouch()&&(t=t.changedTouches[0]),{x:t.clientX-(e?e.x:0),y:t.clientY-(e?e.y:0)}},n.cancel=function(t){t.preventDefault()},n.stop=function(t){t.stopPropagation()},n.eventType=function(t){var e=n.supportsTouch();switch(t){case"start":return e?"touchstart":"mousedown";case"move":return e?"touchmove":"mousemove";case"end":return e?"touchend":"mouseup"}},n.draggable=function(){var t=function(t){this.el=t.el,this.onstart=t.onstart,this.onmove=t.onmove,this.onend=t.onend,this.start=e.bind(this),this.move=i.bind(this),this.end=o.bind(this),this.lock=!1,this.startingPoint=null,n.on(this.el,n.eventType("start"),this.start)},e=function(t){if(!this.lock){this.lock=!0,this.startingPoint=n.pagePoint(t);var e=this.el,i=this.onstart,o=n.rect(e),r=n.clientPoint(t,{x:o.left-n.scrollLeft(e),y:o.top-n.scrollTop(e)});"function"==typeof i&&i(r.x,r.y,t),n.on(document,n.eventType("move"),this.move),n.on(document,n.eventType("end"),this.end)}},i=function(t){var e=this.onmove,i=n.pagePoint(t,this.startingPoint);"function"==typeof e&&e(i.x,i.y,t)},o=function(t){n.off(document,n.eventType("move"),this.move),n.off(document,n.eventType("end"),this.end);var e=this.onend,i=n.pagePoint(t,this.startingPoint);"function"==typeof e&&e(i.x,i.y,t),this.lock=!1};return function(e,n,i,o){new t({el:e,onstart:n,onmove:i,onend:o})}}(),n.droppable=function(t,e){n.on(t,"dragover",n.cancel),n.on(t,"drop",function(i){n.cancel(i);var o=n.rect(t),r=n.clientPoint(i,{x:o.left-n.scrollLeft(t),y:o.top-n.scrollTop(t)});e(r.x,r.y,i)})},n.getTextData=function(t){return t.dataTransfer.getData("text")},n.getImageURLData=function(t){var e=t.dataTransfer,n=e.types;if(!n)return null;var i=Array.prototype.indexOf;if(-1!==i.call(n,"text/uri-list")&&-1!==i.call(n,"text/html")){var o=e.getData("text/html"),r=o.match(/<img.*?src=(["\'])(.+?)\1.*?>/i);if(r)return r[2]}return null},n.btoa=function(t){return window.btoa(escape(encodeURIComponent(t))).replace(/[+\/]/g,function(t){switch(t){case"+":return"-";case"/":return"_"}})},n.atob=function(t){return decodeURIComponent(unescape(window.atob(t.replace(/[-_]/g,function(t){switch(t){case"-":return"+";case"_":return"/"}}))))},"undefined"!=typeof e&&e.exports?e.exports=n:t.dom=n}(this.app||(this.app={}))},{}],8:[function(t,e,n){!function(t){"use strict";var n={};n.inherits=function(t,e){return t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),t},n.identity=function(t){return t},n.escape=function(t){return t.replace(/[&<>"']/g,function(t){switch(t){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&#039;"}})},n.List=function(){var t=function(){this.data=[]};return t.prototype.add=function(t){this.contains(t)||this.data.push(t)},t.prototype.remove=function(t){for(var e=this.data,n=e.length-1;n>=0;n--)if(this.equal(e[n],t)){e.splice(n,1);break}},t.prototype.contains=function(t){return this.data.some(function(e){return this.equal(e,t)}.bind(this))},t.prototype.equal=function(t,e){return t===e},t.prototype.toArray=function(){return this.data.slice()},t}(),n.bindAll=function(t){var e=Object.getPrototypeOf(t);for(var n in e)t[n]=e[n].bind(t)},"undefined"!=typeof e&&e.exports?e.exports=n:t.helper=n}(this.app||(this.app={}))},{}],9:[function(t,e,n){!function(e){"use strict";var n=e.dom||t("./dom.js"),i=e.Canvas||t("./components/canvas.js"),o=e.URLComponent||t("./components/url-component.js"),r=function(){var t=function(){};this.canvas=new i({hasCanvasElementHandle:!1,element:n.el(".canvas"),inserter:t,updater:t,deleter:t}),this.urlComponent=new o,this.loadURLFragment()};r.prototype.loadURLFragment=function(){var t,e=this.urlComponent.fragment();try{t=JSON.parse(n.atob(e.substring(1)))}catch(i){t={title:"",list:[]}}return n.title(t.title+" - OnePage"),this.canvas.loadCanvasElementAll(t.list).then(function(){return t})},e.main=new r}(this.app||(this.app={}))},{"./components/canvas.js":3,"./components/url-component.js":6,"./dom.js":7}]},{},[9]);